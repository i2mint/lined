<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>lined.tools &mdash; lined 0.1.23 documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="../../_static/toggleprompt.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="lined.util" href="util.html" />
    <link rel="prev" title="lined.tests.test_base" href="tests/test_base.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> lined
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../lined.html">lined</a></li>
<li class="toctree-l1"><a class="reference internal" href="base.html">lined.base</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">lined.examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">lined.recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="simple.html">lined.simple</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests/test_base.html">lined.tests.test_base</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">lined.tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">lined.util</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">lined</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>lined.tools</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/module_docs/lined/tools.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-lined.tools">
<span id="lined-tools"></span><h1>lined.tools<a class="headerlink" href="#module-lined.tools" title="Permalink to this headline">¶</a></h1>
<p>All kinds of useful tools to use in pipelines.</p>
<dl class="py class">
<dt id="lined.tools.BufferStats">
<em class="property">class </em><code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">BufferStats</code><span class="sig-paren">(</span><em class="sig-param">values=()</em>, <em class="sig-param">maxlen: int = &lt;object object&gt;</em>, <em class="sig-param">func: Callable = &lt;built-in function sum&gt;</em>, <em class="sig-param">add_new_val: Callable = &lt;method 'append' of 'collections.deque' objects&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#BufferStats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.BufferStats" title="Permalink to this definition">¶</a></dt>
<dd><p>A callable (fifo) buffer. Calls add input to it, but also returns some results
computed from it’s contents.</p>
<p>What “add” means is configurable (through <code class="docutils literal notranslate"><span class="pre">add_new_val</span></code> arg). Default
is append, but can be extend etc.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bs</span> <span class="o">=</span> <span class="n">BufferStats</span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="nb">sum</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">bs</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">)))</span>
<span class="go">[0, 1, 3, 6, 10, 14, 18]</span>
</pre></div>
</div>
<p>See what happens when you feed the same sequence again:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">bs</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">)))</span>
<span class="go">[15, 12, 9, 6, 10, 14, 18]</span>
</pre></div>
</div>
<p>More examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">BufferStats</span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">),</span> <span class="s1">&#39;abcdefgh&#39;</span><span class="p">))</span>
<span class="go">[&#39;a&#39;, &#39;ab&#39;, &#39;abc&#39;, &#39;abcd&#39;, &#39;bcde&#39;, &#39;cdef&#39;, &#39;defg&#39;, &#39;efgh&#39;]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">prod</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">BufferStats</span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">prod</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">)))</span>
<span class="go">[0, 0, 0, 0, 24, 120, 360]</span>
</pre></div>
</div>
<p>With a different <code class="docutils literal notranslate"><span class="pre">add_new_val</span></code> choice.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bs</span> <span class="o">=</span> <span class="n">BufferStats</span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">,</span> <span class="n">add_new_val</span><span class="o">=</span><span class="n">deque</span><span class="o">.</span><span class="n">appendleft</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">bs</span><span class="p">,</span> <span class="s1">&#39;abcdefgh&#39;</span><span class="p">))</span>
<span class="go">[&#39;a&#39;, &#39;ba&#39;, &#39;cba&#39;, &#39;dcba&#39;, &#39;edcb&#39;, &#39;fedc&#39;, &#39;gfed&#39;, &#39;hgfe&#39;]</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">add_new_val=deque.extend</span></code>, data can be fed in chunks.
In the following, also see how we use iterize to get a function that
takes an iterator and returns an iterator</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lined</span> <span class="kn">import</span> <span class="n">iterize</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">window_stats</span> <span class="o">=</span> <span class="n">iterize</span><span class="p">(</span><span class="n">BufferStats</span><span class="p">(</span>
<span class="gp">... </span><span class="n">maxlen</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">,</span> <span class="n">add_new_val</span><span class="o">=</span><span class="n">deque</span><span class="o">.</span><span class="n">extend</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chks</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;bc&#39;</span><span class="p">,</span> <span class="s1">&#39;def&#39;</span><span class="p">,</span> <span class="s1">&#39;gh&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">window_stats</span><span class="p">(</span><span class="n">chks</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">a</span>
<span class="go">abc</span>
<span class="go">cdef</span>
<span class="go">efgh</span>
</pre></div>
</div>
<p>Note: To those who might think that they can optimize this for special
cases: Yes you can.
But SHOULD you? Is it worth the increase in complexity and reduction in
flexibility?
See <a class="reference external" href="https://github.com/thorwhalen/umpyre/blob/master/misc">https://github.com/thorwhalen/umpyre/blob/master/misc</a>
/performance_of_rolling_window_stats.md</p>
</dd></dl>

<dl class="py class">
<dt id="lined.tools.Command">
<em class="property">class </em><code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">Command</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#Command"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.Command" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a no-input callable that will execute a specific function call.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">command</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span><span class="nb">sum</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">command</span><span class="p">()</span>
<span class="go">6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">command</span> <span class="o">=</span> <span class="n">Command</span><span class="p">(</span><span class="nb">print</span><span class="p">,</span> <span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">command</span><span class="p">()</span>
<span class="go">hello, world</span>
</pre></div>
</div>
<p>Note that the same can be achieved with
<cite>partial(func, *args, **kwargs)</cite>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">methodcaller</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">mk_command</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">partial</span><span class="p">(</span><span class="n">methodcaller</span><span class="p">(</span><span class="s1">&#39;__call__&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">),</span> <span class="n">func</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">command</span> <span class="o">=</span> <span class="n">mk_command</span><span class="p">(</span><span class="nb">print</span><span class="p">,</span> <span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;, &#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">command</span><span class="p">()</span>
<span class="go">hello, world</span>
</pre></div>
</div>
<p>See: <a class="reference external" href="https://en.wikipedia.org/wiki/Command_pattern">https://en.wikipedia.org/wiki/Command_pattern</a></p>
</dd></dl>

<dl class="py class">
<dt id="lined.tools.CommandIter">
<em class="property">class </em><code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">CommandIter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#CommandIter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.CommandIter" title="Permalink to this definition">¶</a></dt>
<dd><p>An infinite iterator that returns the results of a Command called repeatedly.</p>
<p>Might become deprecated:
Use <cite>iter(partial(func, *args, **kwargs), object())</cite> instead.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">uniform</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">islice</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">it</span> <span class="o">=</span> <span class="n">CommandIter</span><span class="p">(</span><span class="n">uniform</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rand_nums</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">rand_nums</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rand_nums</span>  
<span class="go">[4.48171445690221, 7.466083642212892, 0.24120342781796422, 3.694956861724484]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="lined.tools.Enumerate">
<em class="property">class </em><code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">Enumerate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">step</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#Enumerate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.Enumerate" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator a function so it enumerates the number of calls.
Or in general, returns (cursor, func(x)) instead of just func(x),
where the start and step of the cursor can
be defined (default is start=0 and step=1)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_foo</span> <span class="o">=</span> <span class="n">Enumerate</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_foo</span><span class="p">(</span><span class="s1">&#39;ha&#39;</span><span class="p">)</span>
<span class="go">(0, &#39;haha&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_foo</span><span class="p">(</span><span class="s1">&#39;ho&#39;</span><span class="p">)</span>
<span class="go">(1, &#39;hoho&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">enum_foo_with_step</span> <span class="o">=</span> <span class="n">Enumerate</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">enum_foo_with_step</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
<span class="go">(3, &#39;zz&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">enum_foo_with_step</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<span class="go">(10, 22)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py exception">
<dt id="lined.tools.ItemsNotSorted">
<em class="property">exception </em><code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">ItemsNotSorted</code><a class="reference internal" href="../../_modules/lined/tools.html#ItemsNotSorted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.ItemsNotSorted" title="Permalink to this definition">¶</a></dt>
<dd><p>Use to indicate that two consecutive items where not in the expected
order</p>
</dd></dl>

<dl class="py class">
<dt id="lined.tools.Segmenter">
<em class="property">class </em><code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">Segmenter</code><span class="sig-paren">(</span><em class="sig-param">buffer: lined.tools.BufferStats, stats_buffer_callback: Callable[[Any, Iterable], Any] = &lt;function return_buffer_on_stats_condition&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#Segmenter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.Segmenter" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gen</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">200</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bs</span> <span class="o">=</span> <span class="n">BufferStats</span><span class="p">(</span><span class="n">maxlen</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="nb">sum</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">return_if_stats_is_odd</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">return_buffer_on_stats_condition</span><span class="p">,</span> <span class="n">cond</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="n">else_val</span><span class="o">=</span><span class="s1">&#39;The sum is not odd!&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seg</span> <span class="o">=</span> <span class="n">Segmenter</span><span class="p">(</span><span class="n">buffer</span><span class="o">=</span><span class="n">bs</span><span class="p">,</span> <span class="n">stats_buffer_callback</span><span class="o">=</span><span class="n">return_if_stats_is_odd</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">seg</span><span class="p">(</span><span class="n">new_val</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># since the sum of the values in the buffer [1] is odd, the buffer is returned</span>
<span class="go">[1]</span>
</pre></div>
</div>
<p>Adding 1 + 2 is still odd so:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">seg</span><span class="p">(</span><span class="n">new_val</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">[1, 2]</span>
</pre></div>
</div>
<p>Now since 1 + 2 + 5 is even, the else_val of return_if_stats_is_odd is returned instead</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">seg</span><span class="p">(</span><span class="n">new_val</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">&#39;The sum is not odd!&#39;</span>
</pre></div>
</div>
<dl class="py method">
<dt id="lined.tools.Segmenter.stats_buffer_callback">
<code class="sig-name descname">stats_buffer_callback</code><span class="sig-paren">(</span><em class="sig-param">buffer: Iterable</em>, <em class="sig-param">cond: Callable = &lt;function is_not_none&gt;</em>, <em class="sig-param">else_val=None</em><span class="sig-paren">)</span><a class="headerlink" href="#lined.tools.Segmenter.stats_buffer_callback" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">return_buffer_on_stats_condition</span><span class="p">(</span><span class="n">stats</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">cond</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">[1, 2, 3, 4]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">return_buffer_on_stats_condition</span><span class="p">(</span><span class="n">stats</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">cond</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">else_val</span><span class="o">=</span><span class="s1">&#39;3 is not even!&#39;</span><span class="p">)</span>
<span class="go">&#39;3 is not even!&#39;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="lined.tools.append_output_to_input">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">append_output_to_input</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">appender=&lt;function &lt;lambda&gt;&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#append_output_to_input"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.append_output_to_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator that makes the function into a function returning its input with output</p>
<p>┌─────────────┐
│    input    │
└─────────────┘</p>
<blockquote>
<div><p>│
▼</p>
</div></blockquote>
<p>┌─────────────┐
│    func     │
└─────────────┘</p>
<blockquote>
<div><p>│
▼</p>
</div></blockquote>
<p>┌─────────────────┐
│ (input, output) │
└─────────────────┘</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;hello </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func</span><span class="p">(</span><span class="s1">&#39;world&#39;</span><span class="p">)</span>
<span class="go">&#39;hello world&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_func</span> <span class="o">=</span> <span class="n">append_output_to_input</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_func</span><span class="p">(</span><span class="s1">&#39;world&#39;</span><span class="p">)</span>
<span class="go">(&#39;world&#39;, &#39;hello world&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.apply_to_single_item">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">apply_to_single_item</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span></em>, <em class="sig-param"><span class="n">item_idx</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#apply_to_single_item"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.apply_to_single_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a version of func that applies itself to only the item_idx-th
element of the input,
leaving the rest untouched.</p>
<p>That is, apply_to_single_item(func, 2), for example, is a new_func such that
<a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a></p>
<blockquote>
<div><p>new_func([a, b, c, d, e]) == [a, b, func(c), d, e]</p>
</div></blockquote>
<p><a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> – A function to apply to a single element of an iterable (that</p>
</dd>
</dl>
<p>has a […])
:param item_idx: The particular item index to apply function to
:return:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">apply_to_second_item</span> <span class="o">=</span> <span class="n">apply_to_single_item</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">10</span><span class="p">,</span> <span class="n">item_idx</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apply_to_second_item</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="go">(1, 20, 2, 3, 4)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.blind">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">blind</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">output</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#blind"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.blind" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes one argument, and returns it as is.
The output is meant to be bound by currying (functools.partial)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">true_no_matter_what</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">blind</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">false_no_matter_what</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">blind</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">true_no_matter_what</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">false_no_matter_what</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.call">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">call</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#call"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.call" title="Permalink to this definition">¶</a></dt>
<dd><p>Just call the input function with not arguments.</p>
<p>Equivalent to <cite>functioncaller()</cite></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lined</span> <span class="kn">import</span> <span class="n">Line</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">partial</span><span class="p">(</span><span class="nb">print</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">x</span><span class="o">*</span><span class="mi">3</span><span class="si">=}</span><span class="s2">&quot;</span><span class="p">),</span> <span class="n">call</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">line</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span>
<span class="go">x*3=42</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.cast_to_tuple_if_non_iterable_or_a_string">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">cast_to_tuple_if_non_iterable_or_a_string</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">*</em>, <em class="sig-param">if_func=&lt;function is_not_iterable_or_is_a_str&gt;</em>, <em class="sig-param">then_func=&lt;function make_it_a_tuple&gt;</em>, <em class="sig-param">else_func=&lt;function identity&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#lined.tools.cast_to_tuple_if_non_iterable_or_a_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement the if-then-else logic as a function.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">if_then_else</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;world&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">if_func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="s1">&#39;world&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">then_func</span><span class="o">=</span><span class="s2">&quot;hello </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">else_func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;hello world&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">if_then_else</span><span class="p">(</span><span class="s1">&#39;bora&#39;</span><span class="p">,</span> <span class="n">if_func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="s1">&#39;world&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">then_func</span><span class="o">=</span><span class="s2">&quot;hello</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">,</span> <span class="n">else_func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;borabora&#39;</span>
</pre></div>
</div>
<p>Really, it’s meant to be curried to make functional components.
For example, to make a function that ensures that a string is
encapsulated in a tuple, we could do this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">is_a_str</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">make_it_a_tuple</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ensure_tuple_if_string</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">if_then_else</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">if_func</span><span class="o">=</span><span class="n">is_a_str</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">then_func</span><span class="o">=</span><span class="n">make_it_a_tuple</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ensure_tuple_if_string</span><span class="p">(</span><span class="s1">&#39;a string&#39;</span><span class="p">)</span>
<span class="go">(&#39;a string&#39;,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ensure_tuple_if_string</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">])</span>  <span class="c1"># not a string so returned as is</span>
<span class="go">[&#39;a&#39;, &#39;list&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.cast_to_tuple_if_string">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">cast_to_tuple_if_string</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">*</em>, <em class="sig-param">if_func=&lt;function is_a_str&gt;</em>, <em class="sig-param">then_func=&lt;function make_it_a_tuple&gt;</em>, <em class="sig-param">else_func=&lt;function identity&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#lined.tools.cast_to_tuple_if_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement the if-then-else logic as a function.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">if_then_else</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;world&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">if_func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="s1">&#39;world&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">then_func</span><span class="o">=</span><span class="s2">&quot;hello </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">else_func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;hello world&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">if_then_else</span><span class="p">(</span><span class="s1">&#39;bora&#39;</span><span class="p">,</span> <span class="n">if_func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="s1">&#39;world&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">then_func</span><span class="o">=</span><span class="s2">&quot;hello</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">,</span> <span class="n">else_func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;borabora&#39;</span>
</pre></div>
</div>
<p>Really, it’s meant to be curried to make functional components.
For example, to make a function that ensures that a string is
encapsulated in a tuple, we could do this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">is_a_str</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">make_it_a_tuple</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ensure_tuple_if_string</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">if_then_else</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">if_func</span><span class="o">=</span><span class="n">is_a_str</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">then_func</span><span class="o">=</span><span class="n">make_it_a_tuple</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ensure_tuple_if_string</span><span class="p">(</span><span class="s1">&#39;a string&#39;</span><span class="p">)</span>
<span class="go">(&#39;a string&#39;,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ensure_tuple_if_string</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">])</span>  <span class="c1"># not a string so returned as is</span>
<span class="go">[&#39;a&#39;, &#39;list&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.check_sorted_during_iteration">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">check_sorted_during_iteration</code><span class="sig-paren">(</span><em class="sig-param">iterable: Iterable, key: Callable[[Any, Any], bool] = &lt;built-in function le&gt;, not_sorted_callback: Union[Callable, BaseException] = &lt;lined.tools.Command object&gt;</em><span class="sig-paren">)</span> &#x2192; Generator<a class="reference internal" href="../../_modules/lined/tools.html#check_sorted_during_iteration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.check_sorted_during_iteration" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap an iterable so that ordering of the elements is checked at runtime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterable</strong> – Iterable to consume</p></li>
<li><p><strong>key</strong> – The function that defines what it means to be sorted.
Could be a Any-&gt;bool function, which will act like the key argument
of builtin sorted for example.
Could also be an explicit (element, next_element)-&gt;bool function that
returns True iff in the right order</p></li>
<li><p><strong>not_sorted_callback</strong> – The function to call when two consecutive</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>elements are not sorted. For example:</dt><dd><ul class="simple">
<li><p>raising an error (the default)</p></li>
<li><p>logging the information, and skiping the offending element (or not)</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A generator consuming the input iterable</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">check_sorted_during_iteration</span><span class="p">(</span><span class="nb">iter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])))</span>
<span class="go">[1, 2, 3, 4]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">check_sorted_during_iteration</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">]),</span> <span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">ItemsNotSorted</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span>
<span class="gp">... </span>        <span class="sa">f</span><span class="s2">&quot;ItemsNotSorted after </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> element (whose value was </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span>
<span class="gp">... </span>        <span class="s2">&quot;----&gt; Normally, here, you&#39;d put exception handling code&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">2</span>
<span class="go">4</span>
<span class="go">ItemsNotSorted after 2 element (whose value was 4)</span>
<span class="go">----&gt; Normally, here, you&#39;d put exception handling code</span>
</pre></div>
</div>
<p>Now, mind you, you have total control over what sorted means.
For example, to define it as strict</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">comp</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span>  <span class="c1"># in real life, use operator.gt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">check_sorted_during_iteration</span><span class="p">(</span><span class="nb">iter</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]),</span> <span class="n">key</span><span class="o">=</span><span class="n">comp</span><span class="p">))</span>
<span class="go">[4, 3, 2, 1]</span>
</pre></div>
</div>
<p>Now for a more complex example.
First we’ll define a function that will consume the iterable until an
error occurs, returning the elements consumed.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lined.tools</span> <span class="kn">import</span> <span class="n">consume_until_error</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lined.simple</span> <span class="kn">import</span> <span class="n">Pipe</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">consume</span> <span class="o">=</span> <span class="n">Pipe</span><span class="p">(</span><span class="n">check_sorted_during_iteration</span><span class="p">,</span> <span class="n">consume_until_error</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">iterable</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;ba&#39;</span><span class="p">,</span> <span class="s1">&#39;cba&#39;</span><span class="p">,</span> <span class="s1">&#39;cba&#39;</span><span class="p">,</span> <span class="s1">&#39;back&#39;</span><span class="p">,</span> <span class="s1">&#39;bacca&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">consume</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">)</span>  <span class="c1"># compare with strict &lt;</span>
<span class="go">[&#39;a&#39;, &#39;ba&#39;, &#39;cba&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">consume</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="nb">len</span><span class="p">)</span>  <span class="c1"># compare based on the length</span>
<span class="go">[&#39;a&#39;, &#39;ba&#39;, &#39;cba&#39;, &#39;cba&#39;, &#39;back&#39;, &#39;bacca&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">consume</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># compare based on first letter only</span>
<span class="go">[&#39;a&#39;, &#39;ba&#39;, &#39;cba&#39;, &#39;cba&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># compare based on whether the previous element is a subset of the next:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">consume</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">set</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="go">[&#39;a&#39;, &#39;ba&#39;, &#39;cba&#39;, &#39;cba&#39;, &#39;back&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.consume_until_error">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">consume_until_error</code><span class="sig-paren">(</span><em class="sig-param">iterable</em>, <em class="sig-param">caught_errors=(&lt;class 'Exception'&gt;</em>, <em class="sig-param">)</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#consume_until_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.consume_until_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterable that will simply exit with out error if one of the caught
errors occurs.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">consume_until_error</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">x</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])))</span>
<span class="go">[0.25, 0.5, 1.0]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.deiterize">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">deiterize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#deiterize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.deiterize" title="Permalink to this definition">¶</a></dt>
<dd><p>The inverse of iterize.
Takes an “iterized” (a.k.a. “vectorized”) function (i.e. a function that
works on iterables), and
That is, takes a func(X,…) function and returns a next(iter(func([X],
…))) function.</p>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.del_fields">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">del_fields</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em>, <em class="sig-param"><span class="n">fields</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#del_fields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.del_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the same mapping, but with specified fields removed.
Intended to be applied to a stream of Mappings, using partial to fix fields</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="n">del_fields</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]),</span> <span class="n">d</span><span class="p">))</span>
<span class="go">[{&#39;b&#39;: 2}, {&#39;c&#39;: 3}]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.dictify">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">dictify</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">copy_dict</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#dictify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.dictify" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a version of the input func that should be called on dictionaries and will
return dictionaries. The function will be applied to the values of a shallow
copy of the dict, unless copy_dict=False, in which case,
it will be applied to the input dict itself.</p>
<p><cite>dictify</cite> is a partial of <cite>valmap</cite></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mult_by_10</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">dictify</span><span class="p">(</span><span class="n">mult_by_10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 20, &#39;b&#39;: 30}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>  <span class="c1"># see that d unchanged</span>
<span class="go">{&#39;a&#39;: 2, &#39;b&#39;: 3}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">dictify</span><span class="p">(</span><span class="n">mult_by_10</span><span class="p">,</span> <span class="n">copy_dict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># but if we ask for it</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 20, &#39;b&#39;: 30}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># we still get a (transformed) dict in the output, but it&#39;s the same dict changed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>  <span class="c1"># now d itself changed</span>
<span class="go">{&#39;a&#39;: 20, &#39;b&#39;: 30}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.enumerate_groups">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">enumerate_groups</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterable</span></em>, <em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#enumerate_groups"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.enumerate_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Get enumeration of groups during a groupby call.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterable</strong> – An iterable</p></li>
<li><p><strong>key</strong> – The key to use in the groupby logic</p></li>
<li><p><strong>start</strong> – Where to start the enumeration (default is 0)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A generator of (group_idx, group, item) triples</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">iterable</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">enumerate_groups</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">))</span> <span class="o">==</span> <span class="p">[</span>
<span class="gp">... </span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="gp">... </span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="gp">... </span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="gp">... </span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
<span class="gp">... </span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
<span class="gp">... </span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="gp">... </span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="gp">... </span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
<span class="gp">... </span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
<span class="gp">... </span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span> <span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.expanded_args">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">expanded_args</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#expanded_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.expanded_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Make’s a func(<a href="#id9"><span class="problematic" id="id10">*</span></a>args) function out of a func(args) one.
In a way, the opposite of map_star.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mysum</span> <span class="o">=</span> <span class="n">expanded_args</span><span class="p">(</span><span class="nb">sum</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mysum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">10</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.false_no_matter_what">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">false_no_matter_what</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">output</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#lined.tools.false_no_matter_what" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes one argument, and returns it as is.
The output is meant to be bound by currying (functools.partial)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">true_no_matter_what</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">blind</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">false_no_matter_what</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">blind</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">true_no_matter_what</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">false_no_matter_what</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.functioncaller">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">functioncaller</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#functioncaller"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.functioncaller" title="Permalink to this definition">¶</a></dt>
<dd><p>Call a function given positional and keyword arguments.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">operator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">functools</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lined</span> <span class="kn">import</span> <span class="n">Pipe</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">Pipe</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="nb">getattr</span><span class="p">,</span> <span class="n">operator</span><span class="p">),</span>  <span class="c1"># get an operator func by name</span>
<span class="gp">... </span>    <span class="n">functioncaller</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>  <span class="c1"># apply it to 49 and 7</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="s1">&#39;add&#39;</span><span class="p">)</span>
<span class="go">56</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="s1">&#39;sub&#39;</span><span class="p">)</span>
<span class="go">42</span>
</pre></div>
</div>
<dl class="simple">
<dt>Note: functioncaller just returns</dt><dd><p><cite>operator.methodcaller(‘__call__’, *args, **kwargs)</cite>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.generator_version">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">generator_version</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#lined.tools.generator_version" title="Permalink to this definition">¶</a></dt>
<dd><p>From an Input-&gt;Ouput function, makes a Iterator[Input]-&gt;Itertor[Output]
Some call this “vectorization”, but it’s not really a vector, but an
iterable, thus the name.</p>
<p><cite>iterize</cite> is a partial of <cite>map</cite>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iterized_f</span> <span class="o">=</span> <span class="n">iterize</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">iterized_f</span><span class="p">(</span><span class="nb">iter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])))</span>
<span class="go">[10, 20, 30]</span>
</pre></div>
</div>
<p>Consider the following pipeline:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lined</span> <span class="kn">import</span> <span class="n">Pipe</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipe</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;hello </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipe</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">&#39;hello 2&#39;</span>
</pre></div>
</div>
<p>But what if you wanted to use the pipeline on a “stream” of data. The
following wouldn’t work:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">pipe</span><span class="p">(</span><span class="nb">iter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">...</span>
<span class="go">TypeError: unsupported operand type(s) for *: &#39;list_iterator&#39; and &#39;int&#39;</span>
</pre></div>
</div>
<p>Remember that error: You’ll surely encounter it at some point.</p>
<p>The solution to it is (often): <code class="docutils literal notranslate"><span class="pre">iterize</span></code>,
which transforms a function that is meant to be applied to a single object,
into a function that is meant to be applied to an array, or any iterable
of such objects.
(You might be familiar (if you use <cite>numpy</cite> for example) with the related
concept of “vectorization”,
or [array programming](<a class="reference external" href="https://en.wikipedia.org/wiki/Array_programming">https://en.wikipedia.org/wiki/Array_programming</a>).)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lined</span> <span class="kn">import</span> <span class="n">Pipe</span><span class="p">,</span> <span class="n">iterize</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterable</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipe</span><span class="p">(</span><span class="n">iterize</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                <span class="n">iterize</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;hello </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iterable</span> <span class="o">=</span> <span class="n">pipe</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># see that the result is an iterable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>  <span class="c1"># consume the iterable and gather it&#39;s items</span>
<span class="go">[&#39;hello 2&#39;, &#39;hello 4&#39;, &#39;hello 6&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.identity">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">identity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#identity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.identity" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes one argument, and returns it as is</p>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.if_then_else">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">if_then_else</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">if_func=functools.partial(&lt;function blind&gt;</em>, <em class="sig-param">output=True)</em>, <em class="sig-param">then_func=&lt;function identity&gt;</em>, <em class="sig-param">else_func=&lt;function identity&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#if_then_else"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.if_then_else" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement the if-then-else logic as a function.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">if_then_else</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;world&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">if_func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="s1">&#39;world&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">then_func</span><span class="o">=</span><span class="s2">&quot;hello </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">else_func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;hello world&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">if_then_else</span><span class="p">(</span><span class="s1">&#39;bora&#39;</span><span class="p">,</span> <span class="n">if_func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="s1">&#39;world&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="n">then_func</span><span class="o">=</span><span class="s2">&quot;hello</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">,</span> <span class="n">else_func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;borabora&#39;</span>
</pre></div>
</div>
<p>Really, it’s meant to be curried to make functional components.
For example, to make a function that ensures that a string is
encapsulated in a tuple, we could do this:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">is_a_str</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">make_it_a_tuple</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">x</span><span class="p">])</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ensure_tuple_if_string</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">if_then_else</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">if_func</span><span class="o">=</span><span class="n">is_a_str</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">then_func</span><span class="o">=</span><span class="n">make_it_a_tuple</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ensure_tuple_if_string</span><span class="p">(</span><span class="s1">&#39;a string&#39;</span><span class="p">)</span>
<span class="go">(&#39;a string&#39;,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ensure_tuple_if_string</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;list&#39;</span><span class="p">])</span>  <span class="c1"># not a string so returned as is</span>
<span class="go">[&#39;a&#39;, &#39;list&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.items">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">items</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mapping</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an items generator from a mapping</p>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.iterate">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">iterate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterable</span><span class="p">:</span> <span class="n">Iterable</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#iterate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.iterate" title="Permalink to this definition">¶</a></dt>
<dd><p>Just iterate through a iterable
Use this to “consume” or “run” an iterator automatically.</p>
<p>For example, consider the following:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lined</span> <span class="kn">import</span> <span class="n">Pipe</span><span class="p">,</span> <span class="n">iterize</span><span class="p">,</span> <span class="n">iterate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipe</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">iterize</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">iterize</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;hello </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">pipe</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="go">hello 2</span>
<span class="go">hello 4</span>
<span class="go">hello 6</span>
</pre></div>
</div>
<p>It could be a bit awkward to have to “consume” the iterable to have it
take effect.
Just calling  <code class="docutils literal notranslate"><span class="pre">pipe([1,</span> <span class="pre">2,</span> <span class="pre">3])</span></code> to get those prints seems like a more
natural way.
This is where you can use <cite>iterate</cite>. It basically “launches” that
consuming loop for you.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipe</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">iterize</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">iterize</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;hello </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">iterate</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipe</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">hello 2</span>
<span class="go">hello 4</span>
<span class="go">hello 6</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.iterize">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">iterize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#iterize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.iterize" title="Permalink to this definition">¶</a></dt>
<dd><p>From an Input-&gt;Ouput function, makes a Iterator[Input]-&gt;Itertor[Output]
Some call this “vectorization”, but it’s not really a vector, but an
iterable, thus the name.</p>
<p><cite>iterize</cite> is a partial of <cite>map</cite>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iterized_f</span> <span class="o">=</span> <span class="n">iterize</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">iterized_f</span><span class="p">(</span><span class="nb">iter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])))</span>
<span class="go">[10, 20, 30]</span>
</pre></div>
</div>
<p>Consider the following pipeline:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lined</span> <span class="kn">import</span> <span class="n">Pipe</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipe</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;hello </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipe</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">&#39;hello 2&#39;</span>
</pre></div>
</div>
<p>But what if you wanted to use the pipeline on a “stream” of data. The
following wouldn’t work:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">pipe</span><span class="p">(</span><span class="nb">iter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">...</span>
<span class="go">TypeError: unsupported operand type(s) for *: &#39;list_iterator&#39; and &#39;int&#39;</span>
</pre></div>
</div>
<p>Remember that error: You’ll surely encounter it at some point.</p>
<p>The solution to it is (often): <code class="docutils literal notranslate"><span class="pre">iterize</span></code>,
which transforms a function that is meant to be applied to a single object,
into a function that is meant to be applied to an array, or any iterable
of such objects.
(You might be familiar (if you use <cite>numpy</cite> for example) with the related
concept of “vectorization”,
or [array programming](<a class="reference external" href="https://en.wikipedia.org/wiki/Array_programming">https://en.wikipedia.org/wiki/Array_programming</a>).)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lined</span> <span class="kn">import</span> <span class="n">Pipe</span><span class="p">,</span> <span class="n">iterize</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterable</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipe</span><span class="p">(</span><span class="n">iterize</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span>
<span class="gp">... </span>                <span class="n">iterize</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;hello </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iterable</span> <span class="o">=</span> <span class="n">pipe</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># see that the result is an iterable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>  <span class="c1"># consume the iterable and gather it&#39;s items</span>
<span class="go">[&#39;hello 2&#39;, &#39;hello 4&#39;, &#39;hello 6&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.keys_extractor">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">keys_extractor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#keys_extractor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.keys_extractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated: Use operator.itemgetter(<a href="#id11"><span class="problematic" id="id12">*</span></a>keys) instead.</p>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.map_star">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">map_star</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#map_star"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.map_star" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a func(args) function out of a func(<a href="#id13"><span class="problematic" id="id14">*</span></a>args) o.
Also known as singularize_arg_input.
In a way, the opposite of map_starexpanded_args.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">singularized_foo</span> <span class="o">=</span> <span class="n">map_star</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">singularized_foo</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">singularized_foo</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="o">==</span> <span class="n">singularized_foo</span><span class="p">({</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">})</span> <span class="o">==</span> <span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.negate">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">negate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#negate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.negate" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a negated version of a function</p>
<p>Will return a function with
the same signature, but whose output is negated (that is, it calls the original
function getting the <cite>output</cite> but instead of returning it,
it returns <cite>not output</cite>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sum</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sum_is_zero</span> <span class="o">=</span> <span class="n">negate</span><span class="p">(</span><span class="nb">sum</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sum_is_zero</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sum_is_zero</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.pairwise">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">pairwise</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterable</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#pairwise"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.pairwise" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield sliding window pairs</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">pairwise</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]))</span>
<span class="go">[(1, 2), (2, 3), (3, 4)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.print_and_pass_on">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">print_and_pass_on</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">*</em>, <em class="sig-param">callback=&lt;built-in function print&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#lined.tools.print_and_pass_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Passes input through to output, but prints before outputing</p>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.raise_">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">raise_</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">exception</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#raise_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.raise_" title="Permalink to this definition">¶</a></dt>
<dd><p>raises the given exception (instance or callable that returns one)
Meant to be hooked to the out put of a function that returns an exception or a
command to raise one.</p>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.raise_exception">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">raise_exception</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">exception</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>Callable<span class="p">, </span>BaseException<span class="p">]</span></span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#raise_exception"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.raise_exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise an exception (from an exception instance, or a callable that
makes one</p>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.return_buffer_on_stats_condition">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">return_buffer_on_stats_condition</code><span class="sig-paren">(</span><em class="sig-param">stats: Any</em>, <em class="sig-param">buffer: Iterable</em>, <em class="sig-param">cond: Callable = &lt;function is_not_none&gt;</em>, <em class="sig-param">else_val=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#return_buffer_on_stats_condition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.return_buffer_on_stats_condition" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">return_buffer_on_stats_condition</span><span class="p">(</span><span class="n">stats</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">cond</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">[1, 2, 3, 4]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">return_buffer_on_stats_condition</span><span class="p">(</span><span class="n">stats</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">buffer</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">cond</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">else_val</span><span class="o">=</span><span class="s1">&#39;3 is not even!&#39;</span><span class="p">)</span>
<span class="go">&#39;3 is not even!&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.return_instead_of_raising_exceptions">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">return_instead_of_raising_exceptions</code><span class="sig-paren">(</span><em class="sig-param">func=None</em>, <em class="sig-param">*</em>, <em class="sig-param">exceptions=(&lt;class 'Exception'&gt;</em>, <em class="sig-param">)</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#return_instead_of_raising_exceptions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.return_instead_of_raising_exceptions" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a function return its exceptions instead of raising them.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">return_instead_of_raising_exceptions</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">3.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># note that this doesn&#39;t raise, but returns the exception (instance)</span>
<span class="go">ZeroDivisionError(&#39;division by zero&#39;)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> – The function to transform.</p></li>
<li><p><strong>exceptions</strong> – The exceptions to handle
Default is Exception (letting other BaseException instances like
KeyboardInterrupt still be raised). If you need more exceptions, or less
exceptions to be handled, enter them here.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.side_call">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">side_call</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">callback</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#side_call"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.side_call" title="Permalink to this definition">¶</a></dt>
<dd><p>Identity function that calls a callaback function before returning the
input as is (unless the input is mutable and the callback changes it).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">lined</span> <span class="kn">import</span> <span class="n">Pipe</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add2</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add2</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
<span class="go">42</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">side_call</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;input is </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logged_add2</span> <span class="o">=</span> <span class="n">Pipe</span><span class="p">(</span><span class="n">logger</span><span class="p">,</span> <span class="n">add2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logged_add2</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
<span class="go">input is 40</span>
<span class="go">42</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.singularize_arg_input">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">singularize_arg_input</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="headerlink" href="#lined.tools.singularize_arg_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a func(args) function out of a func(<a href="#id15"><span class="problematic" id="id16">*</span></a>args) o.
Also known as singularize_arg_input.
In a way, the opposite of map_starexpanded_args.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">singularized_foo</span> <span class="o">=</span> <span class="n">map_star</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">singularized_foo</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">singularized_foo</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="o">==</span> <span class="n">singularized_foo</span><span class="p">({</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">})</span> <span class="o">==</span> <span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.tail_io">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">tail_io</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#tail_io"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.tail_io" title="Permalink to this definition">¶</a></dt>
<dd><p>Will apply function only to the tail of tuple inputs, still passing
the header on.
That is, from a <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">-&gt;</span> <span class="pre">func(x)</span></code> function, you get a <code class="docutils literal notranslate"><span class="pre">(*header,</span> <span class="pre">x)</span> <span class="pre">-&gt;</span> <span class="pre">(</span>
<span class="pre">*header,</span> <span class="pre">func(x))</span></code> function.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">foo</span><span class="p">(</span><span class="s1">&#39;boo&#39;</span><span class="p">)</span>
<span class="go">&#39;booboo&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_foo</span> <span class="o">=</span> <span class="n">tail_io</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_foo</span><span class="p">((</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;boo&#39;</span><span class="p">))</span>
<span class="go">(7, &#39;booboo&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_foo</span><span class="p">((</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;items&#39;</span><span class="p">,</span> <span class="s1">&#39;but&#39;</span><span class="p">,</span> <span class="s1">&#39;the&#39;</span><span class="p">,</span> <span class="s1">&#39;last&#39;</span><span class="p">,</span> <span class="s1">&#39;are&#39;</span><span class="p">,</span> <span class="s1">&#39;just&#39;</span><span class="p">,</span>
<span class="gp">... </span>         <span class="s1">&#39;passed&#39;</span><span class="p">,</span> <span class="s1">&#39;on&#39;</span><span class="p">,</span> <span class="s1">&#39;boo&#39;</span><span class="p">))</span>
<span class="go">(&#39;all&#39;, &#39;items&#39;, &#39;but&#39;, &#39;the&#39;, &#39;last&#39;, &#39;are&#39;, &#39;just&#39;, &#39;passed&#39;, &#39;on&#39;, &#39;booboo&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.true_no_matter_what">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">true_no_matter_what</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">output</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#lined.tools.true_no_matter_what" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes one argument, and returns it as is.
The output is meant to be bound by currying (functools.partial)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">true_no_matter_what</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">blind</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">false_no_matter_what</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">blind</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">true_no_matter_what</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">false_no_matter_what</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.valmap">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">valmap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span><span class="p">:</span> <span class="n">Mapping</span></em>, <em class="sig-param"><span class="n">func</span><span class="p">:</span> <span class="n">Callable</span></em>, <em class="sig-param"><span class="n">copy_dict</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#valmap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.valmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply func to the values of a shallow copy of d, unless copy_dict=False,
in which case, it will be applied to the input dict itself.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valmap</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: 20, &#39;b&#39;: 30}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>  <span class="c1"># see that d unchanged</span>
<span class="go">{&#39;a&#39;: 2, &#39;b&#39;: 3}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valmap</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">10</span><span class="p">,</span> <span class="n">copy_dict</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># but if we ask for it</span>
<span class="go">{&#39;a&#39;: 20, &#39;b&#39;: 30}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># we still get a (transformed) dict in the output, but it&#39;s the same dict changed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>  <span class="c1"># now d itself changed</span>
<span class="go">{&#39;a&#39;: 20, &#39;b&#39;: 30}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.with_cursor">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">with_cursor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">start</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">step</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#with_cursor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.with_cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator a function so it enumerates the number of calls.
Or in general, returns (cursor, func(x)) instead of just func(x),
where the start and step of the cursor can
be defined (default is start=0 and step=1)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_foo</span> <span class="o">=</span> <span class="n">with_cursor</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_foo</span><span class="p">(</span><span class="s1">&#39;ha&#39;</span><span class="p">)</span>
<span class="go">(0, &#39;haha&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_foo</span><span class="p">(</span><span class="s1">&#39;ho&#39;</span><span class="p">)</span>
<span class="go">(1, &#39;hoho&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">enum_foo_with_step</span> <span class="o">=</span> <span class="n">with_cursor</span><span class="p">(</span><span class="n">foo</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">enum_foo_with_step</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
<span class="go">(3, &#39;zz&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">enum_foo_with_step</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<span class="go">(10, 22)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="lined.tools.wrap_first_arg_in_list">
<code class="sig-prename descclassname">lined.tools.</code><code class="sig-name descname">wrap_first_arg_in_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/lined/tools.html#wrap_first_arg_in_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lined.tools.wrap_first_arg_in_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a func(X,…) function and returns a func([X],…) function.</p>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tests/test_base.html" class="btn btn-neutral float-left" title="lined.tests.test_base" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="util.html" class="btn btn-neutral float-right" title="lined.util" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright NO COPYRIGHT.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>